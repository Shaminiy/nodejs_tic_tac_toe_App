inputSet:
  name: tictactoe-10
  identifier: tictactoe10
  orgIdentifier: default
  projectIdentifier: SFTY_Training
  pipeline:
    identifier: Shaminitictactoecanarycd
    stages:
      - stage:
          identifier: canary_deployment
          type: Deployment
          spec:
            service:
              serviceInputs:
                serviceDefinition:
                  type: Kubernetes
                  spec:
                    artifacts:
                      primary:
                        primaryArtifactRef: shaminitictactoeimage
                        sources:
                          - identifier: shaminitictactoeimage
                            type: DockerRegistry
                            spec:
                              imagePath: shaminiy/nodejs_tic_tac_toe_app
                              tag: "10"
            execution:
              steps:
                - stepGroup:
                    identifier: canaryDeployment
                    steps:
                      - step:
                          identifier: canaryDeployment
                          type: K8sCanaryDeploy
                          spec:
                            instanceSelection:
                              type: Count
                              spec:
                                count: 2
    properties:
      ci:
        codebase:
          build: <+input>
